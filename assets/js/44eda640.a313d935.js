"use strict";(self.webpackChunkreplibyte=self.webpackChunkreplibyte||[]).push([[41],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),u=r,y=m["".concat(s,".").concat(u)]||m[u]||d[u]||i;return n?a.createElement(y,o(o({ref:t},c),{},{components:n})):a.createElement(y,o({ref:t},c))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6616:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],l={title:"Container",sidebar_position:1},s="Deploy Replibyte as a container",p={unversionedId:"guides/deploy-replibyte/container",id:"guides/deploy-replibyte/container",title:"Container",description:"You are using Replibyte on your local machine to create and restore dumps, it's great, but now you might want to deploy it close to your production and development environments to automate the process. This step-by-step guide explains how to do it and share you best practices.",source:"@site/docs/guides/deploy-replibyte/container.md",sourceDirName:"guides/deploy-replibyte",slug:"/guides/deploy-replibyte/container",permalink:"/docs/guides/deploy-replibyte/container",editUrl:"https://github.com/Qovery/replibyte/tree/main/website/docs/guides/deploy-replibyte/container.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Container",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"IV. Delete a dump",permalink:"/docs/guides/delete-a-dump"},next:{title:"Qovery",permalink:"/docs/guides/deploy-replibyte/qovery"}},c={},d=[{value:"Create a container with Replibyte",id:"create-a-container-with-replibyte",level:2},{value:"Create an empty directory <code>replibyte-container</code>",id:"create-an-empty-directory-replibyte-container",level:3},{value:"Create Replibyte configuration file",id:"create-replibyte-configuration-file",level:3},{value:"Create container",id:"create-container",level:3},{value:"Deploy container",id:"deploy-container",level:2},{value:"Deployment",id:"deployment",level:2},{value:"Parameters for production",id:"parameters-for-production",level:3},{value:"Parameters to seed development databases",id:"parameters-to-seed-development-databases",level:3}],m={toc:d};function u(e){var t=e.components,l=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"deploy-replibyte-as-a-container"},"Deploy Replibyte as a container"),(0,i.kt)("p",null,"You are using Replibyte on your local machine to ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/create-a-dump"},"create")," and ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/restore-a-dump"},"restore dumps"),", it's great, but now you might want to deploy it close to your production and development environments to automate the process. This step-by-step guide explains how to do it and share you best practices. "),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"for qovery users")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"To deploy with ",(0,i.kt)("a",{parentName:"p",href:"https://www.qovery.com"},"Qovery"),", follow ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/deploy-replibyte/qovery"},"this guide")))),(0,i.kt)("p",null,"Here is a schema of what we are going to put in place."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"schema Replibyte",src:n(5835).Z,width:"1000",height:"475"})),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"In production:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Replibyte periodically dump the production database and.. "),(0,i.kt)("li",{parentName:"ol"},"upload a dump ",(0,i.kt)("strong",{parentName:"li"},"without the sensitive data")," on a S3 bucket."))),(0,i.kt)("li",{parentName:"ol"},"In development:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Replibyte periodically restore the development database with the latest dump. ")))),(0,i.kt)("p",null,"Let's go!"),(0,i.kt)("h2",{id:"create-a-container-with-replibyte"},"Create a container with Replibyte"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"I assume Docker is already installed and running."))),(0,i.kt)("p",null,"To deploy Replibyte, I will put the Replibyte binary into a linux Docker container image. It is an easy way to make Replibyte working everywhere."),(0,i.kt)("p",null,"Here are the steps:"),(0,i.kt)("h3",{id:"create-an-empty-directory-replibyte-container"},"Create an empty directory ",(0,i.kt)("inlineCode",{parentName:"h3"},"replibyte-container")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"mkdir replibyte-container && cd replibyt-container\n")),(0,i.kt)("h3",{id:"create-replibyte-configuration-file"},"Create Replibyte configuration file"),(0,i.kt)("p",null,"I will take our final ",(0,i.kt)("inlineCode",{parentName:"p"},"conf.yaml")," file from the ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/create-a-dump"},'"create a dump"')," guide and rename it into ",(0,i.kt)("inlineCode",{parentName:"p"},"replibyte.yaml"),"."),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You must name your replibyte configuration file ",(0,i.kt)("inlineCode",{parentName:"p"},"replibyte.conf"),". Otherwise, it will not work."))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="replibyte.yaml"',title:'"replibyte.yaml"'},"encryption_key: $ENCRYPTION_SECRET # put a secure secret here\nsource:\n  connection_uri: $SOURCE_CONNECTION_URI\n  transformers:\n    - database: public\n      table: customers\n      columns:\n        - name: first_name\n          transformer_name: first-name\n        - name: last_name\n          transformer_name: random\n        - name: contact_phone\n          transformer_name: phone-number\n        - name: contact_email\n          transformer_name: email\ndatastore:\n  aws:\n    bucket: $S3_BUCKET\n    region: $S3_REGION\n    access_key_id: $S3_ACCESS_KEY_ID\n    secret_access_key: $S3_SECRET_ACCESS_KEY\ndestination:\n  connection_uri: $DESTINATION_CONNECTION_URI\n")),(0,i.kt)("p",null,"Save it into your ",(0,i.kt)("inlineCode",{parentName:"p"},"replibyte-container")," directory."),(0,i.kt)("h3",{id:"create-container"},"Create container"),(0,i.kt)("p",null,"Copy/paste the following Dockerfile in your ",(0,i.kt)("inlineCode",{parentName:"p"},"replibyte-container")," directory"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dockerfile",metastring:'title="Dockerfile"',title:'"Dockerfile"'},"FROM debian:buster as replibyte\n\nRUN apt clean && apt update && apt install -y jq wget curl\n\nWORKDIR replibyte\n\n# Download latest Replibyte binary\nRUN curl -s https://api.github.com/repos/Qovery/replibyte/releases/latest | jq -r '.assets[].browser_download_url' | grep -i 'tar.gz$' | wget -qi - && \\\n    tar zxf *.tar.gz && \\\n    mv `ls replibyte*-linux-musl` replibyte && \\\n    chmod +x replibyte\n\nENV PATH=\"/replibyte:${PATH}\"\n\nARG S3_ACCESS_KEY_ID\nENV S3_ACCESS_KEY_ID $S3_ACCESS_KEY_ID\n\nARG S3_SECRET_ACCESS_KEY\nENV S3_SECRET_ACCESS_KEY $S3_SECRET_ACCESS_KEY\n\nARG S3_REGION\nENV S3_REGION $S3_REGION\n\nARG S3_BUCKET\nENV S3_BUCKET $S3_BUCKET\n\nARG SOURCE_CONNECTION_URI\nENV SOURCE_CONNECTION_URI $SOURCE_CONNECTION_URI\n\nARG DESTINATION_CONNECTION_URI\nENV DESTINATION_CONNECTION_URI $DESTINATION_CONNECTION_URI\n\nARG ENCRYPTION_SECRET\nENV ENCRYPTION_SECRET $ENCRYPTION_SECRET\n\nCOPY replibyte.yaml .\n")),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Never hard code credentials in a Dockerfile"))),(0,i.kt)("p",null,"If you run ",(0,i.kt)("inlineCode",{parentName:"p"},"ls -lh")," you must see 2 files."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"ls -lh\n\n.rw-r--r--   890 xxx  6 May 14:00  Dockerfile\n.rw-r--r--   588 xxx  6 May 14:00  replibyte.yaml\n")),(0,i.kt)("p",null,"And now you can check that you successfully build your container with ",(0,i.kt)("inlineCode",{parentName:"p"},"docker build -f Dockerfile -t replibyte:latest .")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"docker build -f Dockerfile -t replibyte:latest .\n\n\n[+] Building 1.2s (10/10) FINISHED\n => [internal] load build definition from Dockerfile                                                                                                                                                                                                                                                                                                                         0.0s\n => => transferring dockerfile: 47B                                                                                                                                                                                                                                                                                                                                                    0.0s\n => [internal] load .dockerignore                                                                                                                                                                                                                                                                                                                                                      0.0s\n => => transferring context: 2B                                                                                                                                                                                                                                                                                                                                                        0.0s\n => [internal] load metadata for docker.io/library/debian:buster                                                                                                                                                                                                                                                                                                                       1.1s\n => [1/5] FROM docker.io/library/debian:buster@sha256:ebe4b9831fb22dfa778de4ffcb8ea0ad69b5d782d4e86cab14cc1fded5d8e761                                                                                                                                                                                                                                                                 0.0s\n => [internal] load build context                                                                                                                                                                                                                                                                                                                                                      0.0s\n => => transferring context: 36B                                                                                                                                                                                                                                                                                                                                                       0.0s\n => CACHED [2/5] RUN apt clean && apt update && apt install -y jq wget curl                                                                                                                                                                                                                                                                                                            0.0s\n => CACHED [3/5] WORKDIR replibyte                                                                                                                                                                                                                                                                                                                                                     0.0s\n => CACHED [4/5] RUN curl -s https://api.github.com/repos/Qovery/replibyte/releases/latest | jq -r '.assets[].browser_download_url' | grep -i 'tar.gz$' | wget -qi - &&     tar zxf *.tar.gz &&     mv `ls replibyte*-linux-musl` replibyte &&     chmod +x replibyte                                                                                                                  0.0s\n => CACHED [5/5] COPY replibyte.yaml .                                                                                                                                                                                                                                                                                                                                                 0.0s\n => exporting to image                                                                                                                                                                                                                                                                                                                                                                 0.0s\n => => exporting layers                                                                                                                                                                                                                                                                                                                                                                0.0s\n => => writing image sha256:1781d25593a71df493d686eb9db889a705949e6881be38b0d28cc436da8810f6\n")),(0,i.kt)("p",null,"And you can try your container with ",(0,i.kt)("inlineCode",{parentName:"p"},"docker run replibyte:latest replibyte")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"docker run replibyte:latest replibyte\n\n\nReplibyte is a tool to seed your databases with your production data while keeping sensitive data safe, just pass `-h`\n\nUSAGE:\n    replibyte [OPTIONS] --config <configuration file> <SUBCOMMAND>\n\nOPTIONS:\n    -c, --config <configuration file>    replibyte configuration file\n    -h, --help                           Print help information\n    -n, --no-telemetry                   disable telemetry\n    -V, --version                        Print version information\n\nSUBCOMMANDS:\n    dump           all backup commands\n    help           Print this message or the help of the given subcommand(s)\n    transformer    all transformers command\n")),(0,i.kt)("p",null,"If you want to run your Replibyte command properly, you will need to pass all the arguments with the ",(0,i.kt)("inlineCode",{parentName:"p"},"docker run -e")," parameter. E.g:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -e S3_ACCESS_KEY_ID=XXX \\\n           -e S3_SECRET_ACCESS_KEY=YYY \\\n           -e S3_REGION=us-east-2 \\\n           -e S3_BUCKET=my-test-bucket \\\n           -e SOURCE_CONNECTION_URI=postgres://... \\\n           -e DESTINATION_CONNECTION_URI=postgres://... \\\n           -e ENCRYPTION_SECRET=itIsASecret \\\n           replibyte:latest replibyte dump create\n")),(0,i.kt)("h2",{id:"deploy-container"},"Deploy container"),(0,i.kt)("hr",null),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("a",{parentName:"p",href:"https://www.qovery.com"},"Qovery")," (the company behind Replibyte) is a platform used by more than 20 000 developers to deploy their apps on AWS in just a few seconds. Replibyte will be natively supported by Qovery in Q4 2022."))),(0,i.kt)("p",null,"To deploy Replibyte with Qovery - ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/deploy-replibyte/qovery"},"here are the instructions"),"."),(0,i.kt)("hr",null),(0,i.kt)("p",null,"Once you have built and tried your container, you need to push it into a Container Registry. The most popular one is ",(0,i.kt)("a",{parentName:"p",href:"https://hub.docker.com"},"Docker Hub"),". But you can use any other Container Registry like ",(0,i.kt)("a",{parentName:"p",href:"https://aws.amazon.com/ecr/"},"AWS ECR"),", ",(0,i.kt)("a",{parentName:"p",href:"https://cloud.google.com/container-registry"},"Google GCR"),", ",(0,i.kt)("a",{parentName:"p",href:"https://quay.io/"},"Quay"),"... Here, I will use Docker Hub which is free and easy to use."),(0,i.kt)("p",null,"To push your container image in Docker Hub you need to run the following commands:"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You need to sign up on ",(0,i.kt)("a",{parentName:"p",href:"https://hub.docker.com"},"Docker Hub"),"."))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell",metastring:'title="Auth yourself"',title:'"Auth','yourself"':!0},"docker login --username=yourhubusername --email=youremail@company.com\n\nWARNING: login credentials saved in /home/username/.docker/config.json\nLogin Succeeded\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"docker push your_docker_hub_username/replibyte:latest\n")),(0,i.kt)("p",null,"That's it! You are ready to pull and run your replibyte image from anywhere."),(0,i.kt)("h2",{id:"deployment"},"Deployment"),(0,i.kt)("p",null,"This part depends on the platform (E.g Kubernetes, Docker Swarm, Nomad...) you use to deploy your containers. Basically, you just need to pull the container you pushed, and run it with the good parameters."),(0,i.kt)("h3",{id:"parameters-for-production"},"Parameters for production"),(0,i.kt)("p",null,"Here is the command line to dump the production"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -e S3_ACCESS_KEY_ID=XXX \\\n           -e S3_SECRET_ACCESS_KEY=YYY \\\n           -e S3_REGION=us-east-2 \\\n           -e S3_BUCKET=my-test-bucket \\\n           -e SOURCE_CONNECTION_URI=postgres://... \\\n           -e DESTINATION_CONNECTION_URI=postgres://... \\\n           -e ENCRYPTION_SECRET=itIsASecret \\\n           replibyte:latest replibyte dump create\n")),(0,i.kt)("h3",{id:"parameters-to-seed-development-databases"},"Parameters to seed development databases"),(0,i.kt)("p",null,"Here is the command line to seed your development database with the latest production dump"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -e S3_ACCESS_KEY_ID=XXX \\\n           -e S3_SECRET_ACCESS_KEY=YYY \\\n           -e S3_REGION=us-east-2 \\\n           -e S3_BUCKET=my-test-bucket \\\n           -e SOURCE_CONNECTION_URI=postgres://... \\\n           -e DESTINATION_CONNECTION_URI=postgres://... \\\n           -e ENCRYPTION_SECRET=itIsASecret \\\n           replibyte:latest replibyte dump restore remote -v latest\n")),(0,i.kt)("hr",null),(0,i.kt)("p",null,"Do you have any questions? Feel free to join the channel #replibyte on ",(0,i.kt)("a",{parentName:"p",href:"https://discord.qovery.com"},"our Discord server"),"."))}u.isMDXComponent=!0},5835:function(e,t,n){t.Z=n.p+"assets/images/replibyte_dump_and_restore-cfbe738c4397d5baf43b3fcba299c17a.jpg"}}]);